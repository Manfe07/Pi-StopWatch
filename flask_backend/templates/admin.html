<!doctype html>
<html lang="en">
<head>
		<meta charset="UTF-8">
		<link href="../static/css/main.css" rel="stylesheet" type="text/css">
		<link rel="icon" type="image/png" href="../static/img/time-tracking.png">
		<title id="title">Stopwatch-Settings</title>
		<!--The following script tag downloads a font from the Adobe Edge Web Fonts server for use within the web page. We recommend that you do not modify it.-->
		<script>var __adobewebfontsappname__="dreamweaver"</script>   
		<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
		<!--<script src="http://use.edgefonts.net/allerta:n4:default;carme:n4:default.js" type="text/javascript"></script>-->
</head>

<body id="mainpage">
	<h1 id="headline" align="left">Race-Setting</h1>
	<div class="setting_div">
		<form style="padding: 5pt">
  			<label>Rennen Nr.:
				<select name="race_nr_field">
					<option>FC01</option>
					<option>FC02</option>
				</select>
			</label><br>
			<label><a>Team 1 :</a>
				<select name="team_1_field" size="1">
					<option>FC01</option>
					<option>FC02</option>
				</select>
			</label><br>
			<label><a>Team 2 :</a>
				<select name="team_2_field" size="1">
					<option>FC01</option>
					<option>FC02</option>
				</select>
			</label><br>
			<label><a>Team 3 :</a>
				<select name="team_3_field" size="1">
					<option>FC01</option>
					<option>FC02</option>
				</select>
			</label><br><br>
			<a>Zeit 1: </a><input id="time_1_field" type="number" class="time_input" step="0.01" min="0" placeholder="Zeit Bahn 1"><br>
			<a>Zeit 2: </a><input id="time_2_field" type="number" class="time_input" step="0.01" min="0" placeholder="Zeit Bahn 2"><br>
			<a>Zeit 3: </a><input id="time_3_field" type="number" class="time_input" step="0.01" min="0" placeholder="Zeit Bahn 3"><br>
		</form>
		<button style="margin: 5pt" onClick="copy_times()">Copy Times</button>
		
		<div style="padding: 5pt">
			<button onClick="save_settings()">Save</button>
			<button onClick="load_settings()">Load</button>
		</div>
		<img id="finish_picture" src="../static/img/camera.png" width="50%"></img>
	</div>
	<div class="setting_div">
		<a class="settings_h2">Info</a><br>
		<u>Battery:</u> <a id="battery_capacity">000</a>%<br>
		<u>Spannung:</u> <a id="battery_voltage">0.000</a>V<br>
		<u>IP:</u> <a id="ip_adress">123.123.123.123</a><br>
	</div>
</body>
<script>
		url = window.location.hostname;
		race_activ = true;
		armed = false;
		sound = true;	//default ON
	
		function copy_times(){
			$.getJSON('/data', function(data) {
				document.getElementById("time_1_field").value = parseFloat(data.time_1);
				document.getElementById("time_2_field").value = parseFloat(data.time_2);
				document.getElementById("time_3_field").value = parseFloat(data.time_3);
				get_image();
			});
			return 0
		}
		
		function get_image(){
				document.getElementById("finish_picture").src = "/get_image";
		}	
	
		function get_Battery(){
			$.getJSON('/ups', function(data) {
				document.getElementById("battery_voltage").innerHTML = data.voltage;
				document.getElementById("battery_capacity").innerHTML = data.capacity;
				});
			return 0
		}
		
		function get_IP(){
			$.getJSON('/get_ip', function(data) {
				document.getElementById("ip_adress").innerHTML = data.ip;
				});
			return 0
		}
	
		get_IP();
		get_Battery();
		get_image();
		setInterval(get_Battery, 5000);		
		setInterval(get_image, 5000);
	</script>	
</html>
